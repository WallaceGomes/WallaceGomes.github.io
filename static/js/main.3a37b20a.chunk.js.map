{"version":3,"sources":["components/LoadingSpiner/index.js","util/AuthContext.js","App.js","index.js"],"names":["LoadingSpinner","props","className","AuthContext","createContext","isLoggedIn","userId","token","login","logout","logoutTimer","Home","React","lazy","Login","Admin","ResetPass","App","routes","useState","setToken","setUserId","tokenExpirationDate","setTokenExpirationDate","useCallback","expirationDate","tokenExpirationDateNew","Date","getTime","localStorage","setItem","JSON","stringify","toISOString","removeItem","useEffect","remainingTime","setTimeout","clearTimeout","storedData","parse","getItem","path","exact","to","Provider","value","fallback","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"2FAAA,0BAYeA,IARQ,SAAAC,GACtB,OACC,yBAAKC,UAAU,4BACd,yBAAKA,UAAU,qB,gCCPlB,6CAEaC,EAAcC,wBAAc,CACxCC,YAAY,EACZC,OAAQ,KACRC,MAAO,KACPC,MAAO,aACPC,OAAQ,gB,8ICWLC,E,uFALEC,EAAOC,IAAMC,MAAK,kBAAM,sDACxBC,EAAQF,IAAMC,MAAK,kBAAM,sDACzBE,EAAQH,IAAMC,MAAK,kBAAM,sDACzBG,EAAYJ,IAAMC,MAAK,kBAAM,sDAwIpBI,EApIH,WAAO,IA2DdC,EA3Da,EAESC,oBAAS,GAFlB,mBAEVZ,EAFU,KAEHa,EAFG,OAGWD,oBAAS,GAHpB,mBAGVb,EAHU,KAGFe,EAHE,OAIqCF,qBAJrC,mBAIVG,EAJU,KAIWC,EAJX,KAMXf,EAAQgB,uBAAY,SAAClB,EAAQC,EAAOkB,GACzCL,EAASb,GACTc,EAAUf,GAEV,IAAMoB,EACLD,GAAkB,IAAIE,MAAK,IAAIA,MAAOC,UAAY,OACnDL,EAAuBG,GAEvBG,aAAaC,QACZ,WACAC,KAAKC,UAAU,CACd1B,OAAQA,EACRC,MAAOA,EACPkB,eAAgBC,EAAuBO,mBAGvC,IAEGxB,EAASe,uBAAY,WAC1BJ,EAAS,MACTC,EAAU,MACVE,EAAuB,MAEvBM,aAAaK,WAAW,cACtB,IA2EH,OAxEAC,qBAAU,WACT,GAAI5B,GAASe,EAAqB,CACjC,IAAMc,EACLd,EAAoBM,WAAY,IAAID,MAAOC,UAC5ClB,EAAc2B,WAAW5B,EAAQ2B,QAEjCE,aAAa5B,KAEZ,CAACH,EAAOE,EAAQa,IAEnBa,qBAAU,WACT,IAAMI,EAAaR,KAAKS,MAAMX,aAAaY,QAAQ,aAGlDF,GACAA,EAAWhC,OACX,IAAIoB,KAAKY,EAAWd,gBAAkB,IAAIE,MAE1CnB,EACC+B,EAAWjC,OACXiC,EAAWhC,MACX,IAAIoB,KAAKY,EAAWd,mBAGpB,CAACjB,IAKHU,EADGX,EAEF,kBAAC,IAAD,KACC,kBAAC,IAAD,CAAOmC,KAAK,IAAIC,OAAK,GACpB,kBAAChC,EAAD,OAED,kBAAC,IAAD,CAAO+B,KAAK,UACX,kBAAC3B,EAAD,OAED,kBAAC,IAAD,CAAU6B,GAAG,OAKd,kBAAC,IAAD,KACC,kBAAC,IAAD,CAAOF,KAAK,IAAIC,OAAK,GACpB,kBAAChC,EAAD,OAED,kBAAC,IAAD,CAAO+B,KAAK,SAASC,OAAK,GACzB,kBAAC7B,EAAD,OAED,kBAAC,IAAD,CAAO4B,KAAK,qBACX,kBAAC1B,EAAD,OAED,kBAAC,IAAD,CAAU4B,GAAG,OAqBf,kBAACzC,EAAA,EAAY0C,SAAb,CACCC,MAAO,CACNzC,aAAcE,EACdA,MAAOA,EACPD,OAAQA,EACRE,MAAOA,EACPC,OAAQA,IAGT,kBAAC,IAAD,KACC,8BACC,kBAAC,WAAD,CACCsC,SACC,yBAAK7C,UAAU,UACd,kBAAC,IAAD,QAIDgB,OC1IP8B,IAASC,OACR,kBAAC,IAAMC,WAAP,KACC,kBAAC,EAAD,OAEDC,SAASC,eAAe,W","file":"static/js/main.3a37b20a.chunk.js","sourcesContent":["import React from 'react';\n\nimport './styles.css';\n\nconst LoadingSpinner = props => {\n\treturn (\n\t\t<div className=\"loading-spinner__overlay\">\n\t\t\t<div className=\"lds-dual-ring\"></div>\n\t\t</div>\n\t);\n};\n\nexport default LoadingSpinner;\n","import { createContext } from 'react';\n\nexport const AuthContext = createContext({\n\tisLoggedIn: false,\n\tuserId: null,\n\ttoken: null,\n\tlogin: () => { },\n\tlogout: () => { },\n});\n","import React, { Suspense, useEffect, useCallback, useState } from 'react';\nimport {\n\tBrowserRouter as Router,\n\tRoute,\n\tRedirect,\n\tSwitch,\n} from 'react-router-dom';\n\n\nimport './App.css';\nimport { AuthContext } from './util/AuthContext';\nimport LoadingSpinner from './components/LoadingSpiner';\n\nconst Home = React.lazy(() => import('./pages/Home'));\nconst Login = React.lazy(() => import('./pages/Login'));\nconst Admin = React.lazy(() => import('./pages/Admin'));\nconst ResetPass = React.lazy(() => import('./pages/ResetPass'));\n\nlet logoutTimer;\n\nconst App = () => {\n\n\tconst [token, setToken] = useState(false);\n\tconst [userId, setUserId] = useState(false);\n\tconst [tokenExpirationDate, setTokenExpirationDate] = useState();\n\n\tconst login = useCallback((userId, token, expirationDate) => {\n\t\tsetToken(token);\n\t\tsetUserId(userId);\n\n\t\tconst tokenExpirationDateNew =\n\t\t\texpirationDate || new Date(new Date().getTime() + 1000 * 60 * 60 * 12);\n\t\tsetTokenExpirationDate(tokenExpirationDateNew);\n\n\t\tlocalStorage.setItem(\n\t\t\t'userData',\n\t\t\tJSON.stringify({\n\t\t\t\tuserId: userId,\n\t\t\t\ttoken: token,\n\t\t\t\texpirationDate: tokenExpirationDateNew.toISOString(),\n\t\t\t}),\n\t\t);\n\t}, []);\n\n\tconst logout = useCallback(() => {\n\t\tsetToken(null);\n\t\tsetUserId(null);\n\t\tsetTokenExpirationDate(null);\n\n\t\tlocalStorage.removeItem('userData');\n\t}, []);\n\n\n\tuseEffect(() => {\n\t\tif (token && tokenExpirationDate) {\n\t\t\tconst remainingTime =\n\t\t\t\ttokenExpirationDate.getTime() - new Date().getTime();\n\t\t\tlogoutTimer = setTimeout(logout, remainingTime);\n\t\t} else {\n\t\t\tclearTimeout(logoutTimer);\n\t\t}\n\t}, [token, logout, tokenExpirationDate]);\n\n\tuseEffect(() => {\n\t\tconst storedData = JSON.parse(localStorage.getItem('userData'));\n\n\t\tif (\n\t\t\tstoredData &&\n\t\t\tstoredData.token &&\n\t\t\tnew Date(storedData.expirationDate) > new Date()\n\t\t) {\n\t\t\tlogin(\n\t\t\t\tstoredData.userId,\n\t\t\t\tstoredData.token,\n\t\t\t\tnew Date(storedData.expirationDate),\n\t\t\t);\n\t\t}\n\t}, [login]);\n\n\tlet routes;\n\n\tif (token) {\n\t\troutes = (\n\t\t\t<Switch>\n\t\t\t\t<Route path=\"/\" exact>\n\t\t\t\t\t<Home />\n\t\t\t\t</Route>\n\t\t\t\t<Route path=\"/admin\" >\n\t\t\t\t\t<Admin />\n\t\t\t\t</Route>\n\t\t\t\t<Redirect to=\"/\" />\n\t\t\t</Switch>\n\t\t);\n\t} else {\n\t\troutes = (\n\t\t\t<Switch>\n\t\t\t\t<Route path=\"/\" exact>\n\t\t\t\t\t<Home />\n\t\t\t\t</Route>\n\t\t\t\t<Route path=\"/login\" exact>\n\t\t\t\t\t<Login />\n\t\t\t\t</Route>\n\t\t\t\t<Route path=\"/resetpass/:token\">\n\t\t\t\t\t<ResetPass />\n\t\t\t\t</Route>\n\t\t\t\t<Redirect to=\"/\" />\n\t\t\t</Switch>\n\t\t);\n\t}\n\n\t// const routes = (\n\t// \t<Switch>\n\t// \t\t<Route path=\"/\" exact>\n\t// \t\t\t<Home />\n\t// \t\t</Route>\n\t// \t\t<Route path=\"/login\" exact>\n\t// \t\t\t<Login />\n\t// \t\t</Route>\n\t// \t\t<Route path=\"/admin\" >\n\t// \t\t\t<Admin />\n\t// \t\t</Route>\n\t// \t\t<Redirect to=\"/\" />\n\t// \t</Switch>\n\t// );\n\n\treturn (\n\t\t<AuthContext.Provider\n\t\t\tvalue={{\n\t\t\t\tisLoggedIn: !!token,\n\t\t\t\ttoken: token,\n\t\t\t\tuserId: userId,\n\t\t\t\tlogin: login,\n\t\t\t\tlogout: logout,\n\t\t\t}}\n\t\t>\n\t\t\t<Router>\n\t\t\t\t<main>\n\t\t\t\t\t<Suspense\n\t\t\t\t\t\tfallback={\n\t\t\t\t\t\t\t<div className=\"center\">\n\t\t\t\t\t\t\t\t<LoadingSpinner />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t{routes}\n\t\t\t\t\t</Suspense>\n\t\t\t\t</main>\n\t\t\t</Router>\n\t\t</AuthContext.Provider>\n\t);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n"],"sourceRoot":""}